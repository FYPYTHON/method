webpackJsonp([4],{"X+WY":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"LdfsDiskManage",data:function(){return{tableData:[]}},created:function(){this.init()},methods:{init:function(t){var e=this;"flash"===t&&this.$prompt.success({dialogVisible:!0,content:"正在刷新页面,请稍后"}),this.axios.get("/ldfs/api/v1/disk").then(function(s){console.log(s.data),e.tableData=s.data.data,"flash"===t&&(e.$prompt.instance.promptClose(),e.$successPrompt.success({dialogVisible:!0,content:"数据刷新成功"}))}).catch(function(t){e.$prompt.instance.promptClose(),e.$prompt.success({dialogVisible:!0,error:!0,content:"数据刷新失败"})})},stopAndCancel:function(t){var e=this;this.$prompt.success({dialogVisible:!0,show:!0,detemine:!0,content:"磁盘会格式化, 请保存数据!<br>是否继续清空数据并停用磁盘?"}),this.$prompt.instance.$on("detemine",function(){e.$prompt.success({dialogVisible:!0,show:!1,detemine:!1,content:"正在停用中请稍后!"}),e.axios.delete("/ldfs/api/v1/disk",{data:{id:e.tableData[t].id}}).then(function(t){if(e.$prompt.instance.promptClose(),"1"===t.data.success)return e.$successPrompt.success({dialogVisible:!0,content:"清空并停用成功"}),void e.init();e.$prompt.success({dialogVisible:!0,show:!0,detemine:!0,content:"清空并通用失败,<br>"+t.data.rep_msg.description})})})},useConfig:function(t){var e=this;this.$prompt.success({dialogVisible:!0,show:!0,detemine:!0,content:"磁盘会格式化, 请保存数据!<br>是否继续应用数据?"}),this.$prompt.instance.$on("detemine",function(){e.$prompt.success({dialogVisible:!0,show:!1,detemine:!1,content:"正在修改请稍后!"}),e.axios.post("/ldfs/api/v1/disk",{id:e.tableData[t].id}).then(function(t){e.$prompt.instance.promptClose(),"1"===t.data.success?(e.$successPrompt.success({dialogVisible:!0,content:"应用成功"}),e.init()):e.$prompt.success({dialogVisible:!0,show:!0,detemine:!0,content:"应用失败,"+t.data.reason})})})},refresh:function(){this.init("flash")}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("input",{staticClass:"mo-btn-x mo-btn-gray AddBtn",attrs:{type:"button",value:"刷新"},on:{click:t.refresh}}),t._v(" "),s("span",{staticClass:"raid-text"},[t._v("磁盘管理")]),t._v(" "),s("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"690px","highlight-current-row":!0}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"32","show-overflow-tooltip":!0}}),t._v(" "),s("el-table-column",{attrs:{prop:"name",label:"IP","min-width":"60","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.ip))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"slot",label:"盘符","min-width":"60","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.slot))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"total_size",label:"总容量","min-width":"60","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.total_size))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"used_size",label:"可用量","min-width":"60","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.free_size))])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"status",label:"存储状态","min-width":"60","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?s("span",[t._v("已应用")]):s("span",[t._v("未应用")])]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"raid",label:"Raid配置","min-width":"60","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.raid))])]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作","min-width":"50","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.status?s("a",{staticClass:"optionlink",on:{click:function(s){return t.stopAndCancel(e.$index)}}},[t._v("清空并停用")]):t._e(),t._v(" "),e.row.status?t._e():s("a",{staticClass:"optionlink",on:{click:function(s){return t.useConfig(e.$index)}}},[t._v("应用")])]}}])})],1)],1)},staticRenderFns:[]};var i=s("VU/8")(o,n,!1,function(t){s("lUKu")},"data-v-3bc9fd44",null);e.default=i.exports},lUKu:function(t,e){}});
//# sourceMappingURL=4.1f95436080ecb5065a37.js.map